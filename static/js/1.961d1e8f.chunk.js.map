{"version":3,"sources":["config.ts","api.ts","lib/react-cache/index.js","components/Comments/CommentListRow.tsx","components/Comments/CommentList.tsx","components/Comments/CommentNewsHeader.tsx","components/Comments/CommentPage.tsx"],"names":["newspageResource","unstable_createResource","list","page","fetch","config","then","res","json","commentsResource","id","userResource","Object","defineProperty","exports","value","React","require","scheduler","warningWithoutStack$1","condition","format","_len","arguments","length","args","Array","_key","undefined","Error","console","_args$map","map","item","a","b","c","d","e","f","g","h","message","error","argIndex","_message","replace","x","currentDispatcher","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentDispatcher","readContext","Context","observedBits","dispatcher","current","identityHashFn","input","lru","limit","LIMIT","first","size","cleanUpIsScheduled","scheduleCleanUp","unstable_scheduleCallback","cleanUp","targetSize","last","previous","_onDelete","onDelete","_previous","next","deleteLeastRecentlyUsedEntries","add","entry","update","newValue","access","resolvedFirst","_previous2","setLimit","newLimit","createLRU","entries","Map","CacheContext","createContext","accessResult","resource","key","entriesForResource","get","set","thenable","newResult","status","resolvedResult","rejectedResult","newEntry","deleteEntry","bind","delete","maybeHashInput","hashInput","read","result","preload","unstable_setGlobalCacheLimit","memo","comment","useState","expanded","setExpanded","toggleExpanded","event","window","getSelection","toString","Comment","Group","threaded","comments","Avatar","src","user","Content","Author","as","Metadata","time_ago","onClick","style","cursor","Text","dangerouslySetInnerHTML","__html","content","CommentListComponent","children","CommentList","CommentNewsHeader","news","Item","Header","Description","Extra","List","horizontal","verticalAlign","Icon","name","points","domain","CommentsSkeleton","_","idx","CommentPage","props","newsId","match","params","fallback"],"mappings":"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","file":"static/js/1.961d1e8f.chunk.js","sourcesContent":["export default {\n  apiBaseUrl: 'https://api.hnpwa.com/v0/',\n  hnBaseUrl: 'https://news.ycombinator.com/',\n}\n","import config from './config'\nimport { unstable_createResource } from './lib/react-cache'\n\nexport const newspageResource = unstable_createResource(\n  ({ list, page }: { list: string; page?: number }) =>\n    fetch(`${config.apiBaseUrl}${list}/${page || 1}.json`).then(res =>\n      res.json()\n    ),\n  ({ list, page }: { list: string; page?: number }) => list + page\n)\n\nexport const commentsResource = unstable_createResource((id: string) =>\n  fetch(`${config.apiBaseUrl}item/${id}.json`).then(res => res.json())\n)\n\nexport const userResource = unstable_createResource((id: string) =>\n  fetch(`${config.apiBaseUrl}user/${id}.json`).then(res => res.json())\n)\n","/** @license React v16.6.0\n * react-cache.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n/* eslint-disable */\n\n'use strict'\n\n;(function() {\n  'use strict'\n\n  Object.defineProperty(exports, '__esModule', { value: true })\n\n  var React = require('react')\n  var scheduler = require('scheduler')\n\n  /**\n   * Similar to invariant but only logs a warning if the condition is not met.\n   * This can be used to log issues in development environments in critical\n   * paths. Removing the logging code for production environments will keep the\n   * same logic and follow the same code paths.\n   */\n\n  var warningWithoutStack = function() {}\n\n  {\n    warningWithoutStack = function(condition, format) {\n      for (\n        var _len = arguments.length,\n          args = Array(_len > 2 ? _len - 2 : 0),\n          _key = 2;\n        _key < _len;\n        _key++\n      ) {\n        args[_key - 2] = arguments[_key]\n      }\n\n      if (format === undefined) {\n        throw new Error(\n          '`warningWithoutStack(condition, format, ...args)` requires a warning ' +\n            'message argument'\n        )\n      }\n      if (args.length > 8) {\n        // Check before the condition to catch violations early.\n        throw new Error(\n          'warningWithoutStack() currently supports at most 8 arguments.'\n        )\n      }\n      if (condition) {\n        return\n      }\n      if (typeof console !== 'undefined') {\n        var _args$map = args.map(function(item) {\n            return '' + item\n          }),\n          a = _args$map[0],\n          b = _args$map[1],\n          c = _args$map[2],\n          d = _args$map[3],\n          e = _args$map[4],\n          f = _args$map[5],\n          g = _args$map[6],\n          h = _args$map[7]\n\n        var message = 'Warning: ' + format\n\n        // We intentionally don't use spread (or .apply) because it breaks IE9:\n        // https://github.com/facebook/react/issues/13610\n        switch (args.length) {\n          case 0:\n            console.error(message)\n            break\n          case 1:\n            console.error(message, a)\n            break\n          case 2:\n            console.error(message, a, b)\n            break\n          case 3:\n            console.error(message, a, b, c)\n            break\n          case 4:\n            console.error(message, a, b, c, d)\n            break\n          case 5:\n            console.error(message, a, b, c, d, e)\n            break\n          case 6:\n            console.error(message, a, b, c, d, e, f)\n            break\n          case 7:\n            console.error(message, a, b, c, d, e, f, g)\n            break\n          case 8:\n            console.error(message, a, b, c, d, e, f, g, h)\n            break\n          default:\n            throw new Error(\n              'warningWithoutStack() currently supports at most 8 arguments.'\n            )\n        }\n      }\n      try {\n        // --- Welcome to debugging React ---\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        var argIndex = 0\n        var _message =\n          'Warning: ' +\n          format.replace(/%s/g, function() {\n            return args[argIndex++]\n          })\n        throw new Error(_message)\n      } catch (x) {}\n    }\n  }\n\n  var warningWithoutStack$1 = warningWithoutStack\n\n  function createLRU(limit) {\n    var LIMIT = limit\n\n    // Circular, doubly-linked list\n    var first = null\n    var size = 0\n\n    var cleanUpIsScheduled = false\n\n    function scheduleCleanUp() {\n      if (cleanUpIsScheduled === false && size > LIMIT) {\n        // The cache size exceeds the limit. Schedule a callback to delete the\n        // least recently used entries.\n        cleanUpIsScheduled = true\n        scheduler.unstable_scheduleCallback(cleanUp)\n      }\n    }\n\n    function cleanUp() {\n      cleanUpIsScheduled = false\n      deleteLeastRecentlyUsedEntries(LIMIT)\n    }\n\n    function deleteLeastRecentlyUsedEntries(targetSize) {\n      // Delete entries from the cache, starting from the end of the list.\n      if (first !== null) {\n        var resolvedFirst = first\n        var last = resolvedFirst.previous\n        while (size > targetSize && last !== null) {\n          var _onDelete = last.onDelete\n          var _previous = last.previous\n          last.onDelete = null\n\n          // Remove from the list\n          last.previous = last.next = null\n          if (last === first) {\n            // Reached the head of the list.\n            first = last = null\n          } else {\n            first.previous = _previous\n            _previous.next = first\n            last = _previous\n          }\n\n          size -= 1\n\n          // Call the destroy method after removing the entry from the list. If it\n          // throws, the rest of cache will not be deleted, but it will be in a\n          // valid state.\n          _onDelete()\n        }\n      }\n    }\n\n    function add(value, onDelete) {\n      var entry = {\n        value: value,\n        onDelete: onDelete,\n        next: null,\n        previous: null,\n      }\n      if (first === null) {\n        entry.previous = entry.next = entry\n        first = entry\n      } else {\n        // Append to head\n        var last = first.previous\n        last.next = entry\n        entry.previous = last\n\n        first.previous = entry\n        entry.next = first\n\n        first = entry\n      }\n      size += 1\n      return entry\n    }\n\n    function update(entry, newValue) {\n      entry.value = newValue\n    }\n\n    function access(entry) {\n      var next = entry.next\n      if (next !== null) {\n        // Entry already cached\n        var resolvedFirst = first\n        if (first !== entry) {\n          // Remove from current position\n          var _previous2 = entry.previous\n          _previous2.next = next\n          next.previous = _previous2\n\n          // Append to head\n          var last = resolvedFirst.previous\n          last.next = entry\n          entry.previous = last\n\n          resolvedFirst.previous = entry\n          entry.next = resolvedFirst\n\n          first = entry\n        }\n      } else {\n        // Cannot access a deleted entry\n        // TODO: Error? Warning?\n      }\n      scheduleCleanUp()\n      return entry.value\n    }\n\n    function setLimit(newLimit) {\n      LIMIT = newLimit\n      scheduleCleanUp()\n    }\n\n    return {\n      add: add,\n      update: update,\n      access: access,\n      setLimit: setLimit,\n    }\n  }\n\n  var Pending = 0\n  var Resolved = 1\n  var Rejected = 2\n\n  var currentDispatcher =\n    React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n      .ReactCurrentDispatcher\n\n  function readContext(Context, observedBits) {\n    var dispatcher = currentDispatcher.current\n    if (dispatcher === null) {\n      throw new Error(\n        'react-cache: read and preload may only be called from within a ' +\n          \"component's render. They are not supported in event handlers or \" +\n          'lifecycle methods.'\n      )\n    }\n    return dispatcher.readContext(Context, observedBits)\n  }\n\n  function identityHashFn(input) {\n    {\n      !(\n        typeof input === 'string' ||\n        typeof input === 'number' ||\n        typeof input === 'boolean' ||\n        input === undefined ||\n        input === null\n      )\n        ? warningWithoutStack$1(\n            false,\n            'Invalid key type. Expected a string, number, symbol, or boolean, ' +\n              'but instead received: %s' +\n              '\\n\\nTo use non-primitive values as keys, you must pass a hash ' +\n              'function as the second argument to createResource().',\n            input\n          )\n        : void 0\n    }\n    return input\n  }\n\n  var CACHE_LIMIT = 500\n  var lru = createLRU(CACHE_LIMIT)\n\n  var entries = new Map()\n\n  var CacheContext = React.createContext(null)\n\n  function accessResult(resource, fetch, input, key) {\n    var entriesForResource = entries.get(resource)\n    if (entriesForResource === undefined) {\n      entriesForResource = new Map()\n      entries.set(resource, entriesForResource)\n    }\n    var entry = entriesForResource.get(key)\n    if (entry === undefined) {\n      var thenable = fetch(input)\n      thenable.then(\n        function(value) {\n          if (newResult.status === Pending) {\n            var resolvedResult = newResult\n            resolvedResult.status = Resolved\n            resolvedResult.value = value\n          }\n        },\n        function(error) {\n          if (newResult.status === Pending) {\n            var rejectedResult = newResult\n            rejectedResult.status = Rejected\n            rejectedResult.value = error\n          }\n        }\n      )\n      var newResult = {\n        status: Pending,\n        value: thenable,\n      }\n      var newEntry = lru.add(newResult, deleteEntry.bind(null, resource, key))\n      entriesForResource.set(key, newEntry)\n      return newResult\n    } else {\n      return lru.access(entry)\n    }\n  }\n\n  function deleteEntry(resource, key) {\n    var entriesForResource = entries.get(resource)\n    if (entriesForResource !== undefined) {\n      entriesForResource.delete(key)\n      if (entriesForResource.size === 0) {\n        entries.delete(resource)\n      }\n    }\n  }\n\n  function unstable_createResource(fetch, maybeHashInput) {\n    var hashInput =\n      maybeHashInput !== undefined ? maybeHashInput : identityHashFn\n\n    var resource = {\n      read: function(input) {\n        // react-cache currently doesn't rely on context, but it may in the\n        // future, so we read anyway to prevent access outside of render.\n        readContext(CacheContext)\n        var key = hashInput(input)\n        var result = accessResult(resource, fetch, input, key)\n        switch (result.status) {\n          case Pending: {\n            var suspender = result.value\n            throw suspender\n          }\n          case Resolved: {\n            var _value = result.value\n            return _value\n          }\n          case Rejected: {\n            var error = result.value\n            throw error\n          }\n          default:\n            // Should be unreachable\n            return undefined\n        }\n      },\n      preload: function(input) {\n        // react-cache currently doesn't rely on context, but it may in the\n        // future, so we read anyway to prevent access outside of render.\n        readContext(CacheContext)\n        var key = hashInput(input)\n        accessResult(resource, fetch, input, key)\n      },\n    }\n    return resource\n  }\n\n  function unstable_setGlobalCacheLimit(limit) {\n    lru.setLimit(limit)\n  }\n\n  exports.unstable_createResource = unstable_createResource\n  exports.unstable_setGlobalCacheLimit = unstable_setGlobalCacheLimit\n})()\n","import React, { useState } from 'react'\nimport { Comment } from 'semantic-ui-react'\nimport { UserLink } from '../Utils'\nimport { CommentListComponent } from './CommentList'\n\nexport type Item = {\n  comments_count: number\n  comments: Item[]\n  content: string\n  dead?: boolean\n  deleted?: boolean\n  domain?: string\n  id: number\n  level: number\n  points: number | null\n  time_ago: string\n  time: number\n  title: string\n  type: string\n  url?: string\n  user: string | null\n}\n\ntype Props = {\n  comment: Item\n}\n\nconst CommentListRow: React.FC<Props> = ({ comment }) => {\n  const [expanded, setExpanded] = useState(true)\n  const toggleExpanded = (event: React.SyntheticEvent<HTMLSpanElement>) => {\n    const selection = window.getSelection()?.toString()\n    if (!selection) {\n      setExpanded(!expanded)\n    }\n  }\n\n  return (\n    <Comment.Group threaded={!!comment.comments && expanded}>\n      <Comment>\n        <Comment.Avatar\n          src={`https://avatars.dicebear.com/v2/identicon/${comment.user}.svg`}\n        ></Comment.Avatar>\n        <Comment.Content>\n          {comment.user && (\n            <Comment.Author as=\"a\">\n              {<UserLink user={comment.user} />}\n            </Comment.Author>\n          )}\n          <Comment.Metadata as=\"span\">\n            {comment.time_ago}{' '}\n            <span onClick={toggleExpanded} style={{ cursor: 'pointer' }}>\n              {expanded ? '[-] collapse' : '[+] expand'}\n            </span>\n          </Comment.Metadata>\n          <Comment.Text onClick={toggleExpanded}>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: expanded ? comment.content : '<br/>',\n              }}\n            />\n          </Comment.Text>\n        </Comment.Content>\n        {comment.comments && expanded && (\n          <CommentListComponent comments={comment.comments} />\n        )}\n      </Comment>\n    </Comment.Group>\n  )\n}\n\nexport default React.memo(CommentListRow)\n","import React from 'react'\nimport CommentListRow, { Item as CommentType } from './CommentListRow'\nimport { commentsResource } from '../../api'\n\ntype Props = {\n  id: string\n}\n\nconst CommentList: React.FC<Props> = ({ id }) => {\n  const comments = commentsResource.read(id)\n  return <CommentListComponent comments={comments.comments} />\n}\n\ntype ListProps = {\n  comments: CommentType[]\n}\n\nexport const CommentListComponent = ({ comments }: ListProps) => {\n  const children = comments.map((c: CommentType) => (\n    <CommentListRow key={c.id} comment={c} />\n  ))\n\n  return <>{children}</>\n}\n\nexport default CommentList\n","import React from 'react'\nimport { Icon, Item, List } from 'semantic-ui-react'\nimport { DomainLink, NewsLink, UserLink } from '../Utils'\nimport { commentsResource } from '../../api'\n\ntype Props = {\n  id: string\n}\n\nconst CommentNewsHeader: React.FC<Props> = ({ id }) => {\n  const news = commentsResource.read(id)\n\n  return (\n    <Item.Group>\n      <Item>\n        <Item.Content>\n          <Item.Header content={<NewsLink news={news} />} />\n          <Item.Description>\n            <div dangerouslySetInnerHTML={{ __html: news.content || '' }} />\n          </Item.Description>\n          <Item.Extra>\n            <List horizontal={true} verticalAlign=\"middle\">\n              <List.Item>\n                <Icon name=\"time\" /> {news.time_ago}\n              </List.Item>\n              <List.Item>\n                <Icon name=\"heart\" /> {news.points}\n              </List.Item>\n              <List.Item>\n                <Icon name=\"user\" /> {<UserLink user={news.user} />}\n              </List.Item>\n              {news.domain && (\n                <List.Item>\n                  <Icon name=\"world\" />\n                  {<DomainLink domain={news.domain} />}\n                </List.Item>\n              )}\n            </List>\n          </Item.Extra>\n        </Item.Content>\n      </Item>\n    </Item.Group>\n  )\n}\n\nexport default CommentNewsHeader\n","// @ts-ignore\nimport React, { Suspense } from 'react'\nimport { RouteComponentProps } from 'react-router'\nimport {\n  ErrorBoundary,\n  ErrorMessage,\n  PostSkeleton,\n  CommentSkeleton,\n} from '../Utils'\nimport CommentList from './CommentList'\nimport CommentNewsHeader from './CommentNewsHeader'\n\ntype UrlProps = {\n  id?: string\n}\n\ntype Props = RouteComponentProps<UrlProps>\n\nconst CommentPage: React.FC<Props> = props => {\n  const newsId = props.match.params.id\n  if (!newsId) {\n    return null\n  }\n\n  return (\n    <div>\n      <ErrorBoundary\n        fallback={<ErrorMessage error=\"Could not fetch comments\" />}\n      >\n        <Suspense fallback={<PostSkeleton />}>\n          <CommentNewsHeader id={newsId} />\n        </Suspense>\n        <Suspense fallback={<CommentsSkeleton />}>\n          <CommentList id={newsId} />\n        </Suspense>\n      </ErrorBoundary>\n    </div>\n  )\n}\n\nconst CommentsSkeleton = React.memo(() => (\n  <>\n    {[...Array(5)].map((_, idx) => (\n      <CommentSkeleton key={idx} />\n    ))}\n  </>\n))\n\nexport default CommentPage\n"],"sourceRoot":""}